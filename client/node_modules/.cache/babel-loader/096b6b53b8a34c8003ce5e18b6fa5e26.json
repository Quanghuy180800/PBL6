{"ast":null,"code":"var _jsxFileName = \"/home/phuocnghia712/Desktop/CSHTTT/client/src/components/checkout/checkout.js\";\nimport React, { useContext, useState, useEffect } from 'react';\nimport { useLocation, useParams } from 'react-router';\nimport { GlobalState } from '../../GlobalState';\nimport PaypaylExpressBtn from 'react-paypal-express-checkout';\nimport PaypalButton from '../mainpages/cart/PaypalButton';\nconst initialState = {\n  shipname: '',\n  shipaddress: '',\n  shipcity: '',\n  shipstate: '',\n  shipphone: ''\n};\n\nfunction Checkout() {\n  const state = useContext(GlobalState);\n  const [cart, setCart] = state.userAPI.cart;\n  const [ship, setShip] = useState({\n    initialState\n  });\n  const {\n    shipname,\n    shipaddress,\n    shipcity,\n    shipstate,\n    shipphone\n  } = ship;\n  const [total, setTotal] = useState(0);\n  const [token] = state.token;\n\n  const tranSuccess = async payment => {\n    const {\n      paymentID,\n      address\n    } = payment;\n    await axios.post('/api/payment', {\n      cart,\n      paymentID,\n      address\n    }, {\n      headers: {\n        Authorization: token\n      }\n    });\n    setCart([]);\n    addToCart([]);\n    alert(\"You have successfully placed an order.\");\n  }; //get total of cart\n\n\n  useEffect(() => {\n    const getTotal = () => {\n      const total = cart.reduce((prev, item) => {\n        return prev + item.price * item.quantity;\n      }, 0);\n      setTotal(total);\n    };\n\n    getTotal();\n  }, [cart]);\n\n  const onChangeInput = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setShip({ ...ship,\n      [name]: value\n    });\n    console.log(ship);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkout\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"inforcheckout\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"shipping\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"shipform\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }\n  }, \"Shipping Address\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"shipinfor\",\n    type: \"text\",\n    name: \"shipname\",\n    value: ship.shipname,\n    onChange: onChangeInput,\n    required: true,\n    placeholder: \"Reciver fullname\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"shipinfor\",\n    type: \"text\",\n    name: \"shipaddress\",\n    value: ship.shipaddress,\n    onChange: onChangeInput,\n    required: true,\n    placeholder: \"Address\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"shipinfor\",\n    type: \"text\",\n    name: \"shipcity\",\n    value: ship.city,\n    onChange: onChangeInput,\n    required: true,\n    placeholder: \"City\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"shipinfor\",\n    type: \"text\",\n    name: \"shipstate\",\n    value: ship.shipstate,\n    onChange: onChangeInput,\n    required: true,\n    placeholder: \"State\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"shipinfor\",\n    type: \"text\",\n    name: \"shipphone\",\n    value: ship.shipphone,\n    onChange: onChangeInput,\n    required: true,\n    placeholder: \"Reciver phonenumber\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Confirm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cartshipping\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bill\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }\n  }, cart.map(product => /*#__PURE__*/React.createElement(\"div\", {\n    className: \"billdetail\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 29\n    }\n  }, product.title), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 29\n    }\n  }, \"$\", product.price * product.quantity)))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"totalbill\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 17\n    }\n  }, \"Total\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 17\n    }\n  }, \"$\", total)))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"btncheckout\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 17\n    }\n  }, \"Quy khach vui long thanh toan mot nua hoa don, phan con lai se duoc thanh toan khi quy khach nhan hang.\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 17\n    }\n  }, \"Tong hoa don : $\", total, \", So tien phai thanh toan truoc : $\", total / 2), /*#__PURE__*/React.createElement(PaypalButton, {\n    total: total / 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 17\n    }\n  })));\n}\n\nexport default Checkout;","map":{"version":3,"sources":["/home/phuocnghia712/Desktop/CSHTTT/client/src/components/checkout/checkout.js"],"names":["React","useContext","useState","useEffect","useLocation","useParams","GlobalState","PaypaylExpressBtn","PaypalButton","initialState","shipname","shipaddress","shipcity","shipstate","shipphone","Checkout","state","cart","setCart","userAPI","ship","setShip","total","setTotal","token","tranSuccess","payment","paymentID","address","axios","post","headers","Authorization","addToCart","alert","getTotal","reduce","prev","item","price","quantity","onChangeInput","e","name","value","target","console","log","city","map","product","title"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,QAA5B,EAAqCC,SAArC,QAAsD,OAAtD;AACA,SAASC,WAAT,EAAsBC,SAAtB,QAAuC,cAAvC;AACA,SAAQC,WAAR,QAA0B,mBAA1B;AACA,OAAOC,iBAAP,MAA8B,+BAA9B;AACA,OAAOC,YAAP,MAAyB,gCAAzB;AACA,MAAMC,YAAY,GAAG;AACjBC,EAAAA,QAAQ,EAAG,EADM;AAEjBC,EAAAA,WAAW,EAAE,EAFI;AAGjBC,EAAAA,QAAQ,EAAC,EAHQ;AAIjBC,EAAAA,SAAS,EAAC,EAJO;AAKjBC,EAAAA,SAAS,EAAC;AALO,CAArB;;AAOA,SAASC,QAAT,GAAoB;AAEhB,QAAMC,KAAK,GAAGf,UAAU,CAACK,WAAD,CAAxB;AACA,QAAM,CAACW,IAAD,EAAOC,OAAP,IAAkBF,KAAK,CAACG,OAAN,CAAcF,IAAtC;AACA,QAAM,CAACG,IAAD,EAAMC,OAAN,IAAiBnB,QAAQ,CAAC;AAACO,IAAAA;AAAD,GAAD,CAA/B;AACA,QAAM;AAACC,IAAAA,QAAD;AAAUC,IAAAA,WAAV;AAAsBC,IAAAA,QAAtB;AAA+BC,IAAAA,SAA/B;AAAyCC,IAAAA;AAAzC,MAAsDM,IAA5D;AACA,QAAM,CAACE,KAAD,EAAQC,QAAR,IAAoBrB,QAAQ,CAAC,CAAD,CAAlC;AACA,QAAM,CAACsB,KAAD,IAAUR,KAAK,CAACQ,KAAtB;;AAEA,QAAMC,WAAW,GAAG,MAAMC,OAAN,IAAkB;AAClC,UAAM;AAACC,MAAAA,SAAD;AAAYC,MAAAA;AAAZ,QAAuBF,OAA7B;AAEA,UAAMG,KAAK,CAACC,IAAN,CAAW,cAAX,EAA2B;AAACb,MAAAA,IAAD;AAAOU,MAAAA,SAAP;AAAkBC,MAAAA;AAAlB,KAA3B,EAAuD;AACzDG,MAAAA,OAAO,EAAE;AAACC,QAAAA,aAAa,EAAER;AAAhB;AADgD,KAAvD,CAAN;AAIAN,IAAAA,OAAO,CAAC,EAAD,CAAP;AACAe,IAAAA,SAAS,CAAC,EAAD,CAAT;AACAC,IAAAA,KAAK,CAAC,wCAAD,CAAL;AACH,GAVD,CATgB,CAqBhB;;;AACA/B,EAAAA,SAAS,CAAC,MAAK;AACX,UAAMgC,QAAQ,GAAG,MAAK;AAClB,YAAMb,KAAK,GAAGL,IAAI,CAACmB,MAAL,CAAY,CAACC,IAAD,EAAOC,IAAP,KAAgB;AACtC,eAAOD,IAAI,GAAIC,IAAI,CAACC,KAAL,GAAaD,IAAI,CAACE,QAAjC;AACH,OAFa,EAEZ,CAFY,CAAd;AAIAjB,MAAAA,QAAQ,CAACD,KAAD,CAAR;AACH,KAND;;AAQAa,IAAAA,QAAQ;AAEX,GAXQ,EAWP,CAAClB,IAAD,CAXO,CAAT;;AAaA,QAAMwB,aAAa,GAAGC,CAAC,IAAG;AACtB,UAAM;AAACC,MAAAA,IAAD;AAAMC,MAAAA;AAAN,QAAeF,CAAC,CAACG,MAAvB;AACAxB,IAAAA,OAAO,CAAC,EAAC,GAAGD,IAAJ;AAAS,OAACuB,IAAD,GAAOC;AAAhB,KAAD,CAAP;AACAE,IAAAA,OAAO,CAACC,GAAR,CAAY3B,IAAZ;AACH,GAJD;;AAKA,sBACI;AAAK,IAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC;AAAK,IAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC;AAAK,IAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADA,eAEA;AAAO,IAAA,SAAS,EAAC,WAAjB;AAA6B,IAAA,IAAI,EAAC,MAAlC;AAAyC,IAAA,IAAI,EAAC,UAA9C;AAA0D,IAAA,KAAK,EAAEA,IAAI,CAACV,QAAtE;AAAgF,IAAA,QAAQ,EAAE+B,aAA1F;AAAyG,IAAA,QAAQ,MAAjH;AAAkH,IAAA,WAAW,EAAC,kBAA9H;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFA,eAKA;AAAO,IAAA,SAAS,EAAC,WAAjB;AAA6B,IAAA,IAAI,EAAC,MAAlC;AAAyC,IAAA,IAAI,EAAC,aAA9C;AAA4D,IAAA,KAAK,EAAErB,IAAI,CAACT,WAAxE;AAAqF,IAAA,QAAQ,EAAE8B,aAA/F;AAA8G,IAAA,QAAQ,MAAtH;AAAuH,IAAA,WAAW,EAAC,SAAnI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALA,eAQA;AAAO,IAAA,SAAS,EAAC,WAAjB;AAA6B,IAAA,IAAI,EAAC,MAAlC;AAAyC,IAAA,IAAI,EAAC,UAA9C;AAAyD,IAAA,KAAK,EAAErB,IAAI,CAAC4B,IAArE;AAA2E,IAAA,QAAQ,EAAEP,aAArF;AAAoG,IAAA,QAAQ,MAA5G;AAA6G,IAAA,WAAW,EAAC,MAAzH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IARA,eAWA;AAAO,IAAA,SAAS,EAAC,WAAjB;AAA6B,IAAA,IAAI,EAAC,MAAlC;AAAyC,IAAA,IAAI,EAAC,WAA9C;AAA0D,IAAA,KAAK,EAAErB,IAAI,CAACP,SAAtE;AAAiF,IAAA,QAAQ,EAAE4B,aAA3F;AAA0G,IAAA,QAAQ,MAAlH;AAAmH,IAAA,WAAW,EAAC,OAA/H;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAXA,eAcA;AAAO,IAAA,SAAS,EAAC,WAAjB;AAA6B,IAAA,IAAI,EAAC,MAAlC;AAAyC,IAAA,IAAI,EAAC,WAA9C;AAA0D,IAAA,KAAK,EAAErB,IAAI,CAACN,SAAtE;AAAiF,IAAA,QAAQ,EAAE2B,aAA3F;AAA0G,IAAA,QAAQ,MAAlH;AAAmH,IAAA,WAAW,EAAC,qBAA/H;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAdA,CADF,eAiBE;AAAK,IAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAjBF,CADD,eAuBC;AAAK,IAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEQxB,IAAI,CAACgC,GAAL,CAASC,OAAO,iBACZ;AAAK,IAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKA,OAAO,CAACC,KAAb,CADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAKD,OAAO,CAACX,KAAR,GAAgBW,OAAO,CAACV,QAA7B,CAFJ,CADJ,CAFR,CADF,eAWE;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAKlB,KAAL,CAFJ,CAXF,CAvBD,CADD,eAyCE;AAAK,IAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+GADN,eAEM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAAoBA,KAApB,yCAA8DA,KAAK,GAAC,CAApE,CAFN,eAGM,oBAAC,YAAD;AACA,IAAA,KAAK,EAAEA,KAAK,GAAC,CADb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHN,CAzCF,CADJ;AAoDH;;AAED,eAAeP,QAAf","sourcesContent":["import React, { useContext, useState,useEffect } from 'react'\nimport { useLocation, useParams } from 'react-router'\nimport {GlobalState} from '../../GlobalState'\nimport PaypaylExpressBtn from 'react-paypal-express-checkout'\nimport PaypalButton from '../mainpages/cart/PaypalButton'\nconst initialState = {\n    shipname : '',\n    shipaddress: '',\n    shipcity:'',\n    shipstate:'',\n    shipphone:''\n}\nfunction Checkout() {\n\n    const state = useContext(GlobalState)\n    const [cart, setCart] = state.userAPI.cart\n    const [ship,setShip] = useState({initialState})\n    const {shipname,shipaddress,shipcity,shipstate,shipphone} = ship\n    const [total, setTotal] = useState(0)\n    const [token] = state.token\n\n    const tranSuccess = async(payment) => {\n        const {paymentID, address} = payment;\n\n        await axios.post('/api/payment', {cart, paymentID, address}, {\n            headers: {Authorization: token}\n        })\n\n        setCart([])\n        addToCart([])\n        alert(\"You have successfully placed an order.\")\n    }\n\n    //get total of cart\n    useEffect(() =>{\n        const getTotal = () =>{\n            const total = cart.reduce((prev, item) => {\n                return prev + (item.price * item.quantity)\n            },0)\n\n            setTotal(total)\n        }\n\n        getTotal()\n\n    },[cart])\n   \n    const onChangeInput = e =>{\n        const {name,value} = e.target\n        setShip({...ship,[name]:value})\n        console.log(ship)\n    }\n    return (\n        <div className=\"checkout\">\n         <div className=\"inforcheckout\">\n          <div className=\"shipping\">\n            <div className=\"shipform\">\n            <h3>Shipping Address</h3>\n            <input className=\"shipinfor\" type=\"text\" name=\"shipname\"  value={ship.shipname} onChange={onChangeInput} required placeholder=\"Reciver fullname\" />\n           \n          \n            <input className=\"shipinfor\" type=\"text\" name=\"shipaddress\" value={ship.shipaddress} onChange={onChangeInput} required placeholder=\"Address\"></input>\n           \n           \n            <input className=\"shipinfor\" type=\"text\" name=\"shipcity\" value={ship.city} onChange={onChangeInput} required placeholder=\"City\"></input>\n            \n            \n            <input className=\"shipinfor\" type=\"text\" name=\"shipstate\" value={ship.shipstate} onChange={onChangeInput} required placeholder=\"State\"></input>\n            \n           \n            <input className=\"shipinfor\" type=\"text\" name=\"shipphone\" value={ship.shipphone} onChange={onChangeInput} required placeholder=\"Reciver phonenumber\"></input>\n            </div>\n            <div className=\"Confirm\">\n\n            </div>\n          </div>\n         \n          <div className=\"cartshipping\">\n            <div className=\"bill\">\n                {\n                    cart.map(product => (\n                        <div className=\"billdetail\">\n                            <h4>{product.title}</h4>\n                            <p>${product.price * product.quantity}</p>\n                        </div>\n                    ))\n                }\n            </div> \n            <div className=\"totalbill\">\n                <h4>Total</h4>\n                <p>${total}</p>\n            </div>\n          </div>\n          </div>\n          <div className=\"btncheckout\">\n                <p>Quy khach vui long thanh toan mot nua hoa don, phan con lai se duoc thanh toan khi quy khach nhan hang.</p>\n                <p>Tong hoa don : ${total}, So tien phai thanh toan truoc : ${total/2}</p>\n                <PaypalButton\n                total={total/2}\n            \n                />\n          </div>\n        </div>\n    )\n}\n\nexport default Checkout"]},"metadata":{},"sourceType":"module"}