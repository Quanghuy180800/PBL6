{"ast":null,"code":"var _jsxFileName = \"/home/phuocnghia712/Desktop/CSHTTT/client/src/components/checkout/checkout.js\";\nimport React, { useContext, useState, useEffect } from 'react';\nimport { useLocation, useParams } from 'react-router';\nimport { GlobalState } from '../../GlobalState';\nimport PaypaylExpressBtn from 'react-paypal-express-checkout';\nimport PaypalButton from '../mainpages/cart/PaypalButton';\nimport axios from 'axios';\nimport CS from \"../../img/chinhsach.svg\";\nimport payment from \"../../img/payment.svg\";\nimport CS2 from \"../../img/insurance2.svg\";\nimport bag from \"../../img/bag.svg\";\nimport { Link } from 'react-router-dom';\nconst initialState = {\n  shipname: '',\n  shipaddress: '',\n  shipcity: '',\n  shipstate: '',\n  shipphone: ''\n};\n\nfunction Checkout() {\n  const state = useContext(GlobalState);\n  const [cart, setCart] = state.userAPI.cart;\n  const [ship, setShip] = useState({\n    initialState\n  });\n  const {\n    shipname,\n    shipaddress,\n    shipcity,\n    shipstate,\n    shipphone\n  } = ship;\n  const [total, setTotal] = useState(0);\n  const [token] = state.token;\n\n  const addToCart = async cart => {\n    await axios.patch('/user/addcart', {\n      cart\n    }, {\n      headers: {\n        Authorization: token\n      }\n    });\n  };\n\n  const tranSuccess = async payment => {\n    const {\n      paymentID,\n      address\n    } = payment;\n    await axios.post('/api/payment', {\n      cart,\n      paymentID,\n      address,\n      shipname,\n      shipaddress,\n      shipcity,\n      shipstate,\n      shipphone\n    }, {\n      headers: {\n        Authorization: token\n      }\n    });\n    setCart([]);\n    addToCart([]);\n    alert(\"You have successfully placed an order.\");\n  }; //get total of cart\n\n\n  useEffect(() => {\n    const getTotal = () => {\n      const total = cart.reduce((prev, item) => {\n        return prev + item.price * item.quantity;\n      }, 0);\n      setTotal(total);\n    };\n\n    getTotal();\n  }, [cart]);\n\n  const onChangeInput = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setShip({ ...ship,\n      [name]: value\n    });\n    console.log(ship);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkout\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"inforcheckout\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"shipping\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"shipform\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }\n  }, \"Shipping Address\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"shipinfor\",\n    type: \"text\",\n    name: \"shipname\",\n    value: ship.shipname,\n    onChange: onChangeInput,\n    required: true,\n    placeholder: \"Reciver fullname\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"shipinfor\",\n    type: \"text\",\n    name: \"shipaddress\",\n    value: ship.shipaddress,\n    onChange: onChangeInput,\n    required: true,\n    placeholder: \"Address\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"shipinfor\",\n    type: \"text\",\n    name: \"shipcity\",\n    value: ship.city,\n    onChange: onChangeInput,\n    required: true,\n    placeholder: \"City\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"shipinfor\",\n    type: \"text\",\n    name: \"shipstate\",\n    value: ship.shipstate,\n    onChange: onChangeInput,\n    required: true,\n    placeholder: \"State\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"shipinfor\",\n    type: \"text\",\n    name: \"shipphone\",\n    value: ship.shipphone,\n    onChange: onChangeInput,\n    required: true,\n    placeholder: \"Reciver phonenumber\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Confirm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"img\",\n    src: CS,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"icon\",\n    src: payment,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 25\n    }\n  }), \" \\xA0\\xA0 C\\xE1ch th\\u1EE9c thanh to\\xE1n\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 21\n    }\n  }, \"* Qu\\xFD kh\\xE1ch vui l\\xF2ng \\u0111i\\u1EC1n \\u0111\\u1EA7y \\u0111\\u1EE7 th\\xF4ng tin shipping method, v\\xE0 ki\\u1EC3m tra th\\u1EADt k\\u0129 tr\\u01B0\\u1EDBc khi thanh to\\xE1n.\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 21\n    }\n  }, \"Hi\\u1EC7n t\\u1EA1i, Ch\\xFAng t\\xF4i h\\u1ED7 tr\\u1EE3 h\\xECnh th\\u1EE9c thanh to\\xE1n online th\\xF4ng qua \", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 89\n    }\n  }, \"Paypal.\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"icon\",\n    src: CS2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 25\n    }\n  }), \" \\xA0\\xA0 Ch\\xEDnh s\\xE1ch \\u0111\\u1ED5i tr\\u1EA3\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 24\n    }\n  }, \"Th\\u1EDDi gian giao h\\xE0ng:\"), \"\\xA0Trong v\\xF2ng 20 ng\\xE0y k\\u1EC3 t\\u1EEB ng\\xE0y thanh to\\xE1n. \"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 21\n    }\n  }, \"* \\xA0Khi nh\\u1EADn h\\xE0ng qu\\xFD kh\\xE1ch vui l\\xF2ng ki\\u1EC3m tra k\\u0129 s\\u1EA3n ph\\u1EA9m, v\\u1EC1 nh\\xE3n s\\u1EA3n ph\\u1EA9m, m\\xE0u s\\u1EAFc, \\u0111\\u1ED9 b\\u1EC1n, n\\u1EBFu c\\xF3 sai s\\xF3t vui l\\xF2ng g\\u1EEDi s\\u1EA3n ph\\u1EA9m l\\u1EA1i cho shipper, v\\xE0 g\\u1ECDi v\\u1EC1 s\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i: 0848071200 \\u0111\\u1EC3 \\u0111\\u01B0\\u1EE3c t\\u01B0 v\\u1EA5n. \")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"listcard\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cartshipping\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"bagicon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"icon2\",\n    src: bag,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bill\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }\n  }, cart.map(product => /*#__PURE__*/React.createElement(\"div\", {\n    className: \"billdetail\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 29\n    }\n  }, product.title), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 29\n    }\n  }, \"$\", product.price * product.quantity)))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"totalbill\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 17\n    }\n  }, \"Total\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 17\n    }\n  }, \"$\", total))), /*#__PURE__*/React.createElement(Link, {\n    to: \"/cart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 11\n    }\n  }, \"Return to cart\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"btncheckout\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 16\n    }\n  }, \"For Payment:\"), /*#__PURE__*/React.createElement(PaypalButton, {\n    total: total / 2,\n    tranSuccess: tranSuccess,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 17\n    }\n  }, \"* S\\u1ED1  ti\\u1EC1n ph\\u1EA3i thanh to\\xE1n tr\\u01B0\\u1EDBc : $\", total / 2)));\n}\n\nexport default Checkout;","map":{"version":3,"sources":["/home/phuocnghia712/Desktop/CSHTTT/client/src/components/checkout/checkout.js"],"names":["React","useContext","useState","useEffect","useLocation","useParams","GlobalState","PaypaylExpressBtn","PaypalButton","axios","Link","initialState","shipname","shipaddress","shipcity","shipstate","shipphone","Checkout","state","cart","setCart","userAPI","ship","setShip","total","setTotal","token","addToCart","patch","headers","Authorization","tranSuccess","payment","paymentID","address","post","alert","getTotal","reduce","prev","item","price","quantity","onChangeInput","e","name","value","target","console","log","city","CS","CS2","bag","map","product","title"],"mappings":"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","sourcesContent":["import React, { useContext, useState,useEffect } from 'react'\nimport { useLocation, useParams } from 'react-router'\nimport {GlobalState} from '../../GlobalState'\nimport PaypaylExpressBtn from 'react-paypal-express-checkout'\nimport PaypalButton from '../mainpages/cart/PaypalButton'\nimport axios from 'axios'\nimport CS from '../../img/chinhsach.svg'\nimport payment from '../../img/payment.svg'\nimport CS2 from '../../img/insurance2.svg'\nimport bag from '../../img/bag.svg'\nimport { Link } from 'react-router-dom'\n\n\nconst initialState = {\n    shipname : '',\n    shipaddress: '',\n    shipcity:'',\n    shipstate:'',\n    shipphone:''\n}\nfunction Checkout() {\n\n    const state = useContext(GlobalState)\n    const [cart, setCart] = state.userAPI.cart\n    const [ship,setShip] = useState({initialState})\n    const {shipname,shipaddress,shipcity,shipstate,shipphone} = ship\n    const [total, setTotal] = useState(0)\n    const [token] = state.token\n\n    const addToCart = async (cart) =>{\n        await axios.patch('/user/addcart', {cart}, {\n            headers: {Authorization: token}\n        })\n    }\n    const tranSuccess = async(payment) => {\n        const {paymentID, address} = payment;\n\n        await axios.post('/api/payment', {cart, paymentID, address,shipname,shipaddress,shipcity,shipstate,shipphone}, {\n            headers: {Authorization: token}\n        })\n\n        setCart([])\n        addToCart([])\n        alert(\"You have successfully placed an order.\")\n    }\n\n    //get total of cart\n    useEffect(() =>{\n        const getTotal = () =>{\n            const total = cart.reduce((prev, item) => {\n                return prev + (item.price * item.quantity)\n            },0)\n\n            setTotal(total)\n        }\n\n        getTotal()\n\n    },[cart])\n   \n    const onChangeInput = e =>{\n        const {name,value} = e.target\n        setShip({...ship,[name]:value})\n        console.log(ship)\n    }\n    return (\n        <div className=\"checkout\">\n         <div className=\"inforcheckout\">\n          <div className=\"shipping\">\n            <div className=\"shipform\">\n            <h3>Shipping Address</h3>\n            <input className=\"shipinfor\" type=\"text\" name=\"shipname\"  value={ship.shipname} onChange={onChangeInput} required placeholder=\"Reciver fullname\" />\n           \n          \n            <input className=\"shipinfor\" type=\"text\" name=\"shipaddress\" value={ship.shipaddress} onChange={onChangeInput} required placeholder=\"Address\"></input>\n           \n           \n            <input className=\"shipinfor\" type=\"text\" name=\"shipcity\" value={ship.city} onChange={onChangeInput} required placeholder=\"City\"></input>\n            \n            \n            <input className=\"shipinfor\" type=\"text\" name=\"shipstate\" value={ship.shipstate} onChange={onChangeInput} required placeholder=\"State\"></input>\n            \n           \n            <input className=\"shipinfor\" type=\"text\" name=\"shipphone\" value={ship.shipphone} onChange={onChangeInput} required placeholder=\"Reciver phonenumber\"></input>\n            </div>\n            <div className=\"Confirm\">\n                <img className=\"img\" src={CS}/>\n                <div className=\"\">\n                \n                    <h4><img className=\"icon\" src={payment}/> &nbsp;&nbsp; Cách thức thanh toán</h4>\n                    <p>* Quý khách vui lòng điền đầy đủ thông tin shipping method, và kiểm tra thật kĩ trước khi thanh toán.</p>\n                    <p>Hiện tại, Chúng tôi hỗ trợ hình thức thanh toán online thông qua <span>Paypal.</span></p>\n\n                </div>\n                <div className=\"\">\n                    <h4><img className=\"icon\" src={CS2}/> &nbsp;&nbsp; Chính sách đổi trả</h4>\n                    <p><span>Thời gian giao hàng:</span>&nbsp;Trong vòng 20 ngày kể từ ngày thanh toán. </p>\n                    <p>* &nbsp;Khi nhận hàng quý khách vui lòng kiểm tra kĩ sản phẩm, về nhãn sản phẩm, màu sắc, độ bền, nếu có sai sót vui lòng gửi sản phẩm lại cho shipper, và gọi về số điện thoại: 0848071200 để được tư vấn. </p>\n\n                </div>\n\n            </div>\n          </div>\n         <div className=\"listcard\">\n          <div className=\"cartshipping\">\n          <div class=\"bagicon\">\n            <img className=\"icon2\" src={bag}></img>\n            </div>  \n            <div className=\"bill\">\n                {\n                    cart.map(product => (\n                        <div className=\"billdetail\">\n                            <h4>{product.title}</h4>\n                            <p>${product.price * product.quantity}</p>\n                        </div>\n                    ))\n                }\n            </div> \n            <div className=\"totalbill\">\n                \n                <h4>Total</h4>\n                <p>${total}</p>\n            </div>\n\n          </div>\n          <Link to=\"/cart\">Return to cart</Link>\n          </div>\n          </div>\n          <div className=\"btncheckout\">\n               <h3>For Payment:</h3>\n                <PaypalButton\n                total={total/2}\n                tranSuccess={tranSuccess}\n                />\n                <p>* Số  tiền phải thanh toán trước : ${total/2}</p>\n          </div>\n        </div>\n    )\n}\n\nexport default Checkout"]},"metadata":{},"sourceType":"module"}