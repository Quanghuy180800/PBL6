{"ast":null,"code":"var _jsxFileName = \"/home/phuocnghia712/Desktop/CSHTTT/client/src/components/mainpages/products/Home.js\";\nimport React, { useContext, useEffect, useState } from 'react';\nimport { GlobalState } from '../../../GlobalState';\nimport ProductItem from '../utils/productItem/ProductItem';\nimport Loading from '../utils/loading/Loading';\nimport axios from 'axios';\nimport Filters from './Filters';\nimport LoadMore from './LoadMore';\nimport Img from '../../../img/banner.jpg';\nimport Footer from '../../footer/Footer';\nimport Slider from '../../Slider/Slider';\n\nfunction Homes() {\n  const state = useContext(GlobalState);\n  const [products, setProducts] = state.productsAPI.products;\n  const [producttt, setProducttt] = useState([]);\n  const [isAdmin] = state.userAPI.isAdmin;\n  const [token] = state.token;\n  const [callback, setCallback] = state.productsAPI.callback;\n  const [loading, setLoading] = useState(false);\n  const [isCheck, setIsCheck] = useState(false);\n\n  const handleCheck = id => {\n    products.forEach(product => {\n      if (product._id === id) product.checked = !product.checked;\n    });\n    setProducts([...products]);\n  };\n\n  useEffect(() => {\n    if (products) {\n      products.forEach(product => {\n        console.log(product.title);\n        const cpst = [...producttt, {\n          'title': product.title\n        }];\n        setProducttt(cpst);\n      });\n    }\n  }, []);\n  console.log(product.title);\n  console.log(producttt);\n\n  const deleteProduct = async (id, public_id) => {\n    try {\n      setLoading(true);\n      const destroyImg = axios.post('/api/destroy', {\n        public_id\n      }, {\n        headers: {\n          Authorization: token\n        }\n      });\n      const deleteProduct = axios.delete(`/api/products/${id}`, {\n        headers: {\n          Authorization: token\n        }\n      });\n      await destroyImg;\n      await deleteProduct;\n      setCallback(!callback);\n      setLoading(false);\n    } catch (err) {\n      alert(err.response.data.msg);\n    }\n  };\n\n  const checkAll = () => {\n    products.forEach(product => {\n      product.checked = !isCheck;\n    });\n    setProducts([...products]);\n    setIsCheck(!isCheck);\n  };\n\n  const deleteAll = () => {\n    products.forEach(product => {\n      if (product.checked) deleteProduct(product._id, product.images.public_id);\n    });\n  };\n\n  if (loading) return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 24\n    }\n  }, /*#__PURE__*/React.createElement(Loading, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 29\n    }\n  }));\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"hero-image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Infor\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Intro\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 16\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 20\n    }\n  }, \"Who are we?\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 20\n    }\n  }, \"Antique!! \\u0110\\u01B0\\u1EE3c th\\xE0nh l\\u1EADp n\\u0103m 2020, v\\u1EDBi m\\u1EE5c \\u0111\\xEDch mang l\\u1EA1i nh\\u1EEFng s\\u1EA3n ph\\u1EA9m c\\xF3 tu\\u1ED5i \\u0111\\u1EDDi cao, nh\\u01B0ng ch\\u1EA5t l\\u01B0\\u1EE3ng c\\u0169ng nh\\u01B0 hi\\u1EC7u qu\\u1EA3 s\\u1EED d\\u1EE5ng v\\u1EABn c\\xF2n. Hi\\u1EC7n nay, s\\u1EA3n l\\u01B0\\u1EE3ng s\\u1EA3n ph\\u1EA9m ch\\u01B0a \\u0111a d\\u1EA1ng, ch\\xFAng t\\xF4i kh\\xF4ng ng\\u1EEBng t\\xECm ki\\u1EBFm, \\u0111\\u1EC3 mang l\\u1EA1i nh\\u1EEFng s\\u1EA3n ph\\u1EA9m \\u0111\\u1ED9c l\\u1EA1 cho c\\xE1c b\\u1EA1n.\"), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 20\n    }\n  }, \"WELLCOME to our website!\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Img\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: Img,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 17\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"titledetail\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }\n  }, \"What We have?\")), /*#__PURE__*/React.createElement(Filters, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"products\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }\n  }, products.map(product => {\n    return /*#__PURE__*/React.createElement(ProductItem, {\n      key: product._id,\n      product: product,\n      isAdmin: isAdmin,\n      deleteProduct: deleteProduct,\n      handleCheck: handleCheck,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 28\n      }\n    });\n  })), /*#__PURE__*/React.createElement(LoadMore, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }\n  }), products.length === 0 && /*#__PURE__*/React.createElement(Loading, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 35\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"titledetail\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }\n  }, \"Our Store\")), /*#__PURE__*/React.createElement(Slider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"phonecall\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 13\n    }\n  }, \"To make an enquiry call \", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 40\n    }\n  }, \"+0848071200\"))), /*#__PURE__*/React.createElement(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 9\n    }\n  }));\n}\n\nexport default Homes;","map":{"version":3,"sources":["/home/phuocnghia712/Desktop/CSHTTT/client/src/components/mainpages/products/Home.js"],"names":["React","useContext","useEffect","useState","GlobalState","ProductItem","Loading","axios","Filters","LoadMore","Img","Footer","Slider","Homes","state","products","setProducts","productsAPI","producttt","setProducttt","isAdmin","userAPI","token","callback","setCallback","loading","setLoading","isCheck","setIsCheck","handleCheck","id","forEach","product","_id","checked","console","log","title","cpst","deleteProduct","public_id","destroyImg","post","headers","Authorization","delete","err","alert","response","data","msg","checkAll","deleteAll","images","map","length"],"mappings":"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","sourcesContent":["import React, {useContext, useEffect, useState} from 'react'\nimport {GlobalState} from '../../../GlobalState'\nimport ProductItem from '../utils/productItem/ProductItem'\nimport Loading from '../utils/loading/Loading'\nimport axios from 'axios'\nimport Filters from './Filters'\nimport LoadMore from './LoadMore'\nimport Img from '../../../img/banner.jpg'\nimport Footer from '../../footer/Footer'\nimport Slider from '../../Slider/Slider'\n\nfunction Homes() {\n    const state = useContext(GlobalState)\n    const [products, setProducts] = state.productsAPI.products\n    const [producttt,setProducttt] = useState([])\n    const [isAdmin] = state.userAPI.isAdmin\n    const [token] = state.token\n    const [callback, setCallback] = state.productsAPI.callback\n    const [loading, setLoading] = useState(false)\n    const [isCheck, setIsCheck] = useState(false)\n\n\n    const handleCheck = (id) =>{\n        products.forEach(product => {\n            if(product._id === id) product.checked = !product.checked \n        })\n        setProducts([...products])\n    }\n\n    useEffect(()=>{\n        if(products){\n            products.forEach(product => {\n                console.log(product.title)\n                const cpst = [...producttt,{'title' :product.title}]\n                setProducttt(cpst)\n            })}\n    },[])\n    console.log(product.title)\n    console.log(producttt)\n\n    const deleteProduct = async(id, public_id) => {\n        try {\n            setLoading(true)\n            const destroyImg = axios.post('/api/destroy', {public_id},{\n                headers: {Authorization: token}\n            })\n            const deleteProduct = axios.delete(`/api/products/${id}`, {\n                headers: {Authorization: token}\n            })\n\n            await destroyImg\n            await deleteProduct\n            setCallback(!callback)\n            setLoading(false)\n        } catch (err) {\n            alert(err.response.data.msg)\n        }\n    }\n\n    const checkAll = () =>{\n        products.forEach(product => {\n            product.checked = !isCheck\n        })\n        setProducts([...products])\n        setIsCheck(!isCheck)\n    }\n\n    const deleteAll = () =>{\n        products.forEach(product => {\n            if(product.checked) deleteProduct(product._id, product.images.public_id)\n        })\n    }\n\n    if(loading) return <div><Loading /></div>\n    return (\n        <>\n       \n        <div className=\"hero-image\">\n           <div className=\"Infor\">\n               <div className=\"Intro\">\n                   <h1>Who are we?</h1>\n                  \n                   <p>Antique!! Được thành lập năm 2020,\n                       với mục đích mang lại những sản phẩm có tuổi đời cao, \n                       nhưng chất lượng cũng như hiệu quả sử dụng vẫn còn.\n                       Hiện nay, sản lượng sản phẩm chưa đa dạng, chúng tôi không ngừng tìm kiếm,\n                       để mang lại những sản phẩm độc lạ cho các bạn.\n                   </p>\n                   <h3>WELLCOME to our website!</h3>\n               </div>\n           </div> \n            <div className=\"Img\">\n                <img src={Img}></img>\n            </div>\n        </div>      \n\n        <div className=\"Title\">\n            <h1 className=\"titledetail\">\n                What We have?\n            </h1>\n        </div>\n\n        <Filters />\n\n       \n        \n        <div className=\"products\">\n            {\n                products.map(product => {\n                    return <ProductItem key={product._id} product={product}\n                    isAdmin={isAdmin} deleteProduct={deleteProduct} handleCheck={handleCheck} />\n                })\n            } \n        </div>\n\n        <LoadMore />\n        {products.length === 0 && <Loading />}\n        <div className=\"Title\">\n            <h1 className=\"titledetail\">\n                Our Store\n            </h1>\n        </div>\n        <Slider/>\n        <div className=\"phonecall\">\n            <p>To make an enquiry call <span>+0848071200</span></p>\n        </div>\n        <Footer />\n        </>\n    )\n}\n\nexport default Homes\n"]},"metadata":{},"sourceType":"module"}