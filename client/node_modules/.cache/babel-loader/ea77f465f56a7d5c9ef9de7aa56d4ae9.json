{"ast":null,"code":"var _jsxFileName = \"/home/phuocnghia712/Desktop/CSHTTT/client/src/components/mainpages/history/OrderHistory.js\";\nimport React, { useContext, useEffect } from 'react';\nimport { GlobalState } from '../../../GlobalState';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\n\nfunction OrderHistory() {\n  const state = useContext(GlobalState);\n  const [history, setHistory] = state.userAPI.history;\n  const [isAdmin] = state.userAPI.isAdmin;\n  const [token] = state.token;\n  useEffect(() => {\n    if (token) {\n      const getHistory = async () => {\n        if (isAdmin) {\n          const res = await axios.get('/api/payment', {\n            headers: {\n              Authorization: token\n            }\n          });\n          setHistory(res.data);\n        } else {\n          const res = await axios.get('/user/history', {\n            headers: {\n              Authorization: token\n            }\n          });\n          setHistory(res.data);\n        }\n      };\n\n      getHistory();\n    }\n  }, [token, isAdmin, setHistory]);\n  const mystyle = {\n    color: \"#263575\",\n    fontWeight: \"600\",\n    fontStyle: \"italic\"\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"history-page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 9\n    }\n  }, isAdmin ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 13\n    }\n  }, \"History Of Customer Order\"), /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 13\n    }\n  }, \"You have \", history.length, \" ordered\")) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }\n  }, \"Your Payment History\"), /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }\n  }, \"You have \", history.length, \" payment bill\")), /*#__PURE__*/React.createElement(\"table\", {\n    class: \"styled-table\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 21\n    }\n  }, !isAdmin ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 25\n    }\n  }, \"Customer\")) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 25\n    }\n  }, \"Paypal name\")), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 25\n    }\n  }, \"ID\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 25\n    }\n  }, \"Date of Payment\"), isAdmin ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 29\n    }\n  }, \"Reciver\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 29\n    }\n  }, \"order status\")) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 29\n    }\n  }, \"Paid\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 29\n    }\n  }, \"Total\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 29\n    }\n  }, \"Status\")), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 25\n    }\n  }))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 17\n    }\n  }, history.map(items => /*#__PURE__*/React.createElement(\"tr\", {\n    key: items._id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 29\n    }\n  }, !isAdmin ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 33\n    }\n  }, items.name)) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 33\n    }\n  }, items.address.recipient_name)), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 33\n    }\n  }, items.paymentID), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 33\n    }\n  }, new Date(items.createdAt).toLocaleDateString()), isAdmin ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 33\n    }\n  }, items.shipname), /*#__PURE__*/React.createElement(\"td\", {\n    style: mystyle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 33\n    }\n  }, items.shippingstatus)) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 33\n    }\n  }, \"$\", items.pay), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 33\n    }\n  }, \"$\", items.total), /*#__PURE__*/React.createElement(\"td\", {\n    style: mystyle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 33\n    }\n  }, items.shippingstatus)), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: `/history/${items._id}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 37\n    }\n  }, \"Details\")))))));\n}\n\nexport default OrderHistory;","map":{"version":3,"sources":["/home/phuocnghia712/Desktop/CSHTTT/client/src/components/mainpages/history/OrderHistory.js"],"names":["React","useContext","useEffect","GlobalState","Link","axios","OrderHistory","state","history","setHistory","userAPI","isAdmin","token","getHistory","res","get","headers","Authorization","data","mystyle","color","fontWeight","fontStyle","length","map","items","_id","name","address","recipient_name","paymentID","Date","createdAt","toLocaleDateString","shipname","shippingstatus","pay","total"],"mappings":"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","sourcesContent":["import React, {useContext, useEffect} from 'react'\nimport {GlobalState} from '../../../GlobalState'\nimport {Link} from 'react-router-dom'\nimport axios from 'axios'\n\nfunction OrderHistory() {\n    const state = useContext(GlobalState)\n    const [history, setHistory] = state.userAPI.history\n    const [isAdmin] = state.userAPI.isAdmin\n    const [token] = state.token\n    \n\n    useEffect(() => {\n        if(token){\n            const getHistory = async() =>{\n                if(isAdmin){\n                    const res = await axios.get('/api/payment', {\n                        headers: {Authorization: token}\n                    })\n                    setHistory(res.data)\n                }else{\n                    const res = await axios.get('/user/history', {\n                        headers: {Authorization: token}\n                    })\n                    setHistory(res.data)\n                }\n            }\n            getHistory()\n        }\n    },[token, isAdmin, setHistory])\n\n    const mystyle = {\n        color : \"#263575\",\n        fontWeight: \"600\",\n        fontStyle: \"italic\",   \n    }\n\n\n    return (\n        <div className=\"history-page\">\n            {\n            isAdmin ?\n            <>\n            <h2>History Of Customer Order</h2>\n            <h4>You have {history.length} ordered</h4>\n            </>\n            :\n            <>\n            <h2>Your Payment History</h2>\n            <h4>You have {history.length} payment bill</h4>\n            </>\n            }\n            <table class=\"styled-table\">\n                <thead>\n                    <tr>\n                        { !isAdmin ?\n                        <>\n                        <th>Customer</th>\n                        </>\n                        :\n                        <>\n                        <th>Paypal name</th>\n                        </>\n                        }\n                        <th>ID</th>\n                        <th>Date of Payment</th>\n                        {\n                            isAdmin ?\n                            <>\n                            <th>Reciver</th>\n                            <th>order status</th>\n                            </>\n                            : \n                            <>\n                            <th>Paid</th>\n                            <th>Total</th>\n                            <th>Status</th>\n                            </>\n                        }\n                        <th></th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {\n                        history.map(items => (\n                            <tr key={items._id}>\n                                {\n                                 !isAdmin ?\n                                 <>   \n                                <td>{items.name}</td>\n                                </>\n                                :\n                                <>   \n                                <td>{items.address.recipient_name}</td>\n                                </>\n                                }\n                                <td>{items.paymentID}</td>\n                                <td>{new Date(items.createdAt).toLocaleDateString()}</td>\n                                { isAdmin ?\n                                <>\n                                <td>{items.shipname}</td>\n                                <td style={\n                                mystyle\n                                }>{items.shippingstatus}</td>\n                                </>\n                                :\n                                <>\n                                <td>${items.pay}</td>\n                                <td>${items.total}</td>\n                                <td style={\n                                  mystyle\n                                }>{items.shippingstatus}</td>\n                                </>\n                                }\n                                <td><Link to={`/history/${items._id}`}>Details</Link></td>\n                            </tr>\n                        ))\n                    }\n                </tbody>\n            </table>\n        </div>\n    )\n}\n\nexport default OrderHistory\n"]},"metadata":{},"sourceType":"module"}